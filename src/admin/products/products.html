<div class="admin-panel-header">
    <h3>Gesti√≥n de Productos</h3>
</div>

<div id="product-modal-container" class="modal-container">
    <div class="modal-overlay" onclick="window.closeProductModal()"></div>
    <div class="modal-content">
        <button class="modal-close-btn" onclick="window.closeProductModal()">‚úñ</button>
        <h4 id="modal-title">Agregar/Editar Producto</h4>
        <form id="product-form" class="product-form">
            <input type="hidden" id="product-id">
            <input type="hidden" id="current_image_url" name="current_image_url">
            
            <div class="form-grid">
                <div class="form-column">
                    <div class="form-group">
                        <label for="name">Nombre:</label>
                        <input type="text" id="name" name="name" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="price">Precio (S/):</label>
                        <input type="number" id="price" name="price" step="0.01" required>
                    </div>

                    <div class="form-group checkbox-group">
                        <input type="checkbox" id="is_active" name="is_active">
                        <label for="is_active">Activo para venta</label>
                    </div>
                    
                    <div class="form-group">
                        <label for="category_id">Categor√≠a Existente:</label>
                        <select id="category_id" name="categoria_id" required>
                            <option value="">-- Seleccione una Categor√≠a --</option>
                        </select>
                    </div>
                    
                    <div class="form-group" id="new-category-group">
                        <label for="new_category_name">O Crear Nueva Categor√≠a:</label>
                        <div class="input-with-button">
                            <input type="text" id="new_category_name" placeholder="Escribe el nombre de la nueva categor√≠a">
                            <button type="button" id="create-category-btn" class="secondary-btn">Crear y Seleccionar</button>
                        </div>
                    </div>
                </div>

                <div class="form-column">
                    <div class="form-group">
                        <label for="image_file">Imagen (Nueva):</label>
                        <input type="file" id="image_file" accept="image/*" name="image_file">
                        <div id="image-preview" class="image-preview"></div>
                        <p class="image-tip">Sube una imagen cuadrada para mejores resultados.</p>
                    </div>
                </div>
            </div>

            <div class="form-actions">
                <button type="submit" id="save-product-btn">Guardar Producto</button>
                <button type="button" id="cancel-edit-btn" class="secondary-btn" style="display: none;">Cancelar Edici√≥n</button>
            </div>
        </form>
    </div>
</div>

<div id="delete-modal-container" class="modal-container">
    <div class="modal-overlay" onclick="window.closeDeleteModal()"></div>
    <div class="modal-content delete-modal">
        <h4>üö® Confirmar Eliminaci√≥n</h4>
        <p>Est√°s a punto de eliminar permanentemente el producto: <strong id="product-to-delete-name"></strong>.</p>
        <p>¬øEst√°s seguro de que deseas continuar? Esta acci√≥n no se puede deshacer.</p>
        <div class="form-actions">
            <button id="confirm-delete-btn" class="delete-btn">S√≠, Eliminar</button>
            <button class="secondary-btn" onclick="window.closeDeleteModal()">Cancelar</button>
        </div>
    </div>
</div>


<div class="admin-panel-list admin-card">
    <div class="list-header-top">
        <input type="text" id="product-search-input" placeholder="Buscar por Nombre o Categor√≠a..." aria-label="Buscador de productos">
    </div>

    <div class="add-product-container">
        <button id="open-create-modal-btn" class="primary-btn full-width-btn">‚ûï Agregar Nuevo Producto</button>
    </div>
    
    <div id="product-view-tabs" class="tabs-container">
        <button class="tab-button active" data-filter="active">Productos Activos</button>
        <button class="tab-button" data-filter="all">Todos los Productos</button>
    </div>
    
    <div id="products-list-views">
        <div id="active-products-list" class="products-grid active-view">
            </div>
        <div id="all-products-list" class="products-grid">
            </div>
    </div>
    
    <div id="active-empty-msg" class="empty-list-msg" style="display: none;">No hay productos activos que coincidan con la b√∫squeda.</div>
    <div id="all-empty-msg" class="empty-list-msg" style="display: none;">No hay productos que coincidan con la b√∫squeda.</div>
    
</div>